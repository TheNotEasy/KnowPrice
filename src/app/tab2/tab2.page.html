<ng-container>
  <ion-content [fullscreen]="true">
    <div class="container list">
      <p class="container__title">Список покупок</p>

      <ng-template #loading>
        <ion-spinner style="margin: 100px auto; text-align: center; width: 70%;" *ngIf="!isLoadingFailed; else loadingFailed"></ion-spinner>
      </ng-template>
      <ng-template #loadingFailed>
        <app-error></app-error>
      </ng-template>

      <div class="shop container">
        <ng-container *ngIf="readyPromise | async; else loading">
          <ng-container *ngFor="let shop of items | array">
            <p class="container__title shop__name">{{ shops[shop.key] }}</p>
            <ion-list class="goods__list">
              <ion-item *ngFor="let item of shop.value" #ionItem
                        (mousedown)="itemMouseDown($any(ionItem).el, item.id)"
                        (mouseup)="itemMouseUp($any(ionItem).el, item.id)"
                        (mouseleave)="itemMouseLeave($any(ionItem).el, item.id)"> <!-- I don't know how to get IonItem element otherwise -->
                <p slot="start">{{ item.name }}</p>
                <p slot="end">{{ item.price }} руб</p>
              </ion-item>
            </ion-list>
          </ng-container>
        </ng-container>
      </div>
      
      
    </div>
  </ion-content>
</ng-container>

